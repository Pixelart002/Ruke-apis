import axios from 'axios'; import { useRouter } from 'next/router'; import Header from '../../components/Header';
export default function Product(){ const router = useRouter(); const { id } = router.query; const [p,setP] = require('react').useState(null);
  require('react').useEffect(()=>{ if(!id) return; axios.get('/api/products/'+id).then(r=>setP(r.data)) }, [id]);
  if(!p) return <div>Loading...</div>; return (<div><Header /><div className="container py-6"><h1 className="text-2xl font-bold">{p.title}</h1><img src={p.image_url||'/placeholder.png'} className="w-full h-96 object-cover my-4"/><p className="text-lg">${p.price}</p><p className="mt-4">{p.description}</p><button className="mt-4 bg-blue-600 text-white px-4 py-2 rounded" onClick={async ()=>{ const token = localStorage.getItem('token'); await axios.post('/api/cart/add',{ product_id: p.id, quantity:1 },{ headers: { Authorization: token ? 'Bearer '+token : '' } }); alert('Added to cart') }}>Add to cart</button></div></div>) }
